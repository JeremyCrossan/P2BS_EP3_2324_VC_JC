const fs = require('fs');
const csv = require('csv-parser');
const sqlite3 = require('sqlite3').verbose();

// Open de databaseverbinding
let db = new sqlite3.Database('my-events.db');

// Lees het CSV-bestand en laad de gegevens in de database
fs.createReadStream('data.csv')
  .pipe(csv())
  .on('data', (row) => {
    // Voeg de gegevens toe aan de relevante tabel in de database
    // Bijvoorbeeld, voor evenementen:
    db.run(`INSERT INTO Evenementen (eventID, naam, beschrijving, datum, locatie) VALUES (?, ?, ?, ?, ?)`, 
      [row.eventID, row.naam, row.beschrijving, row.datum, row.locatie], (err) => {
        if (err) {
          console.error(err.message);
        }
      });
    // Herhaal dit voor de andere tabellen (sessies, gebruikers) zoals nodig
  })
  .on('end', () => {
    console.log('Gegevens zijn succesvol geladen in de database');
    // Sluit de databaseverbinding wanneer het proces is voltooid
    db.close();
  });
